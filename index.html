<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sky Volley - Touch Friendly</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin: 0; background: linear-gradient(#6ec6ff, #ffffff); display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; }
  canvas { background: #fdfdfd; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); margin-top: 10px; }
  #controls { margin-top: 10px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
  button { padding: 15px 20px; font-size: 18px; border-radius: 8px; border: none; background: #ff7f50; color: white; }
</style>
</head>
<body>

<canvas id="game" width="900" height="450"></canvas>
<div id="controls">
  <button id="left">Left</button>
  <button id="right">Right</button>
  <button id="jump">Jump</button>
  <button id="dash">Dash</button>
  <button id="power">Power Hit</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Game constants
const gravity = 0.5;
let score = { player: 0, ai: 0 };

// Player
const player = { x: 150, y: 300, w: 30, h: 60, dy: 0, speed: 5, jump: false, dash: false, power: false, moveLeft: false, moveRight: false };

// AI
const ai = { x: 700, y: 300, w: 30, h: 60, dy: 0, speed: 4 };

// Ball
const ball = { x: 450, y: 200, r: 12, dx: 4, dy: -4 };

// Touch button events
document.getElementById("left").addEventListener("touchstart", () => player.moveLeft = true);
document.getElementById("left").addEventListener("touchend", () => player.moveLeft = false);

document.getElementById("right").addEventListener("touchstart", () => player.moveRight = true);
document.getElementById("right").addEventListener("touchend", () => player.moveRight = false);

document.getElementById("jump").addEventListener("touchstart", () => { if(!player.jump) player.dy = -12; player.jump = true; });
document.getElementById("dash").addEventListener("touchstart", () => { player.dash = true; setTimeout(() => player.dash = false, 300); });
document.getElementById("power").addEventListener("touchstart", () => { player.power = true; setTimeout(() => player.power = false, 500); });

// Draw functions
function drawCourt() { ctx.strokeStyle="#ccc"; ctx.lineWidth=4; ctx.beginPath(); ctx.moveTo(canvas.width/2,0); ctx.lineTo(canvas.width/2,canvas.height); ctx.stroke(); }
function drawScore() { ctx.fillStyle="#333"; ctx.font="24px Arial"; ctx.fillText(score.player, canvas.width/2 - 60, 40); ctx.fillText(score.ai, canvas.width/2 + 40, 40); }
function drawRect(obj, color) { ctx.fillStyle = color; ctx.fillRect(obj.x,obj.y,obj.w,obj.h); }
function drawBall() { ctx.fillStyle = "orange"; ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fill(); }

// Player update
function updatePlayer() {
  if(player.moveLeft) player.x -= player.speed;
  if(player.moveRight) player.x += player.speed;
  if(player.dash) player.x += 8;

  player.dy += gravity;
  player.y += player.dy;

  if(player.y + player.h >= canvas.height) { player.y = canvas.height - player.h; player.dy=0; player.jump=false; }
}

// AI update
function updateAI() {
  ai.dy += gravity;
  ai.y += ai.dy;
  if(ball.x>canvas.width/2){
    if(ball.y < ai.y) ai.dy = -5;
    if(ball.y > ai.y + ai.h) ai.dy = 5;
  }
  if(ai.y + ai.h >= canvas.height){ ai.y=canvas.height-ai.h; ai.dy=0; }
}

// Ball update
function updateBall(){
  ball.x += ball.dx; ball.y += ball.dy; ball.dy += 0.2;

  if(ball.y + ball.r > canvas.height){
    if(ball.x<canvas.width/2) score.ai++; else score.player++;
    resetBall();
  }
  if(ball.y - ball.r <0) ball.dy*=-1;
  if(ball.x - ball.r <0 || ball.x + ball.r > canvas.width) ball.dx*=-1;

  collide(player,true); collide(ai,false);
}

function collide(p,isPlayer){
  if(ball.x+ball.r > p.x && ball.x-ball.r < p.x+p.w &&
     ball.y+ball.r > p.y && ball.y-ball.r < p.y+p.h){
    ball.dy = -(p.power ? 10 : 5);
    ball.dx = isPlayer ? (p.power ? 6 : 4) : -4;
    if(isPlayer && p.power) ball.dy = -12;
  }
}

function resetBall(){ ball.x=450; ball.y=200; ball.dx=(Math.random()<0.5?4:-4); ball.dy=-4; }

function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawCourt(); drawScore(); drawRect(player,"red"); drawRect(ai,"blue"); drawBall();
  updatePlayer(); updateAI(); updateBall();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
